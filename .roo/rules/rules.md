# PearAI 仓库模板规则文件

这是一个规则文件，用于定义与 PearAI 交互时的行为准则和项目管理规范。

## 工作流程

### 基本工作方式

1. **首先读取规则文件** - PearAI应该首先读取`.roo/rules/rules.md`文件，了解项目的规则和约定
2. **确定技术栈** - 在项目开始时，明确开发语言、框架和技术栈，并记录在此规则文件中
3. **根据规则进行编码** - 严格按照规则文件中的要求进行所有开发和编码工作
4. **计划驱动开发** - 所有开发工作都应基于计划文件中定义的目标和任务
5. **分块编码** - 每次编码长度不要过长，采用分块分步的方式进行开发
6. **环境变量处理** - 查看本地是否有 `.env` 或类似的环境变量文件，从中获取环境变量用于测试和配置

### 计划管理流程

1. **创建/修改计划** - 根据用户的意见和需求，创建新的计划文件或修改现有计划
2. **智能版本控制** - 由 AI 根据用户改动的大小自动判断版本号如何增加：
   - 重大功能变更或架构调整：主版本号+1 (如1.0.0 → 2.0.0)
   - 新功能添加：次版本号+1 (如1.0.0 → 1.1.0)
   - 错误修复或小幅改进：修订版本号+1 (如1.0.0 → 1.0.1)
3. **对话整合** - 可以将用户在一个对话中的多个要求整合到一个计划文件中
4. **模块化编码** - 根据计划文件进行模块化的编码实现

## 项目结构规则

### 文件组织

- `.roo/rules/rules.md` - 项目规则和约定文档
- `plan/x.y.z.yaml` - 版本化的计划文件，其中 `x.y.z` 为语义化版本号
- 所有模板文件应保持清晰的目录结构

### 版本管理

- 计划文件使用语义化版本号（如0.0.0, 1.0.0, 1.1.0, 2.0.0）
- 主版本号：重大功能变更或不兼容更新
- 次版本号：新功能添加，向后兼容
- 修订版本号：错误修复和小幅改进

## 项目技术栈配置

### 开发语言和技术栈

在项目开始时，请确定并记录以下信息：

- **主要开发语言**: [待确定 - 如 JavaScript, Python, Java 等]
- **前端框架**: [待确定 - 如 React, Vue, Angular 等]
- **后端框架**: [待确定 - 如 Express, Django, Spring 等]
- **数据库**: [待确定 - 如 MySQL, PostgreSQL, MongoDB 等]
- **部署平台**: [待确定 - 如 Docker, Kubernetes, AWS 等]
- **其他工具**: [待确定 - 如 Redis, Nginx 等]

### 环境配置

- 项目应包含适当的环境变量配置文件（如 `.env` ）
- AI 会自动读取环境变量文件以获取配置信息
- 敏感信息应通过 `.rooignore` 文件排除 AI 读取

## PearAI交互规则

### 编码规范

- **分块开发** - 每次编码任务应控制在合理长度，避免一次性生成过长代码，单次单个文件修改最多不要超过400行
- **逐步实现** - 复杂功能应分解为多个小步骤，逐步完成
- **环境感知** - 自动检查并使用项目中的环境变量配置
- **成本控制** - 开发时注意AI请求的成本，不要说没用的废话，说话要简练精确

### 测试规范

- 测试时检查有无环境变量，如果有，从其中获取测试用户名和密码
- 测试完无论是正常还是报错，记得释放端口，不要让测试实例一直运行，不结束测试实例不允许结束任务

### 计划修改

- PearAI 可以根据用户需求自动修改计划目标
- 修改时应保持 YAML 文件的结构完整性
- 新目标应包含 title 、 description 、 status 、 priority 字段

### 任务管理

- 每个任务必须有唯一的 ID 标识
- 任务状态包括： pending （待处理）、 in_progress （进行中）、 completed （已完成）、 cancelled （已取消）
- 优先级分为： high （高）、 medium （中）、 low （低）

### 文档维护

- 规则文件应定期更新以反映最新需求
- 计划文件的 metadata 部分应记录修改历史
- 所有变更应有明确的说明和时间戳

### 计划管理规范

- **计划优先原则** - 每次用户提出需求时，必须先创建或修改计划文件，然后再安排其他角色完成计划里的任务，不能直接布置任务给其他角色。具体步骤：
  1. 分析用户需求，确定是否需要新的计划或修改现有计划
  2. 创建或更新对应的计划文件（遵循版本号规范）
  3. 将任务分配给合适的执行角色
  4. 跟踪任务执行状态并及时更新计划

- **格式规范要求** - 所有计划文件必须严格遵循template.yaml模板格式，禁止出现扩展字段。具体要求：
  - 只使用template.yaml中定义的字段
  - 不得添加自定义字段或修改字段结构
  - 严格遵循YAML语法规范
  - 版本号使用语义化版本规范（如0.1.0, 1.0.0等）

- **任务状态管理** - 每次完成计划后，必须修改计划中的任务状态。状态管理要求：
  - 任务完成后立即将状态从"in_progress"更新为"completed"
  - 添加完成日期（completed_date字段）
  - 如任务取消，将状态更新为"cancelled"并记录原因
  - 定期审查所有任务状态，确保准确性

- **历史任务继承** - 在创建新计划时，需要考虑之前计划未完成的任务。继承规则：
  - 检查前一个版本计划中状态为"pending"或"in_progress"的任务
  - 评估这些任务是否仍然相关和必要
  - 将相关任务纳入新计划，并更新任务ID和依赖关系
  - 在metadata中添加历史任务继承说明

## 使用指南

### 创建新计划

1. **使用模板文件** - 根据`/plan/template.yaml`文件创建新的计划文件
2. **复制并重命名** - 将 template.yaml 复制为新的版本号文件（如1.0.0.yaml ）
3. **更新版本信息** - 修改文件中的 version 字段和基本信息
4. **调整计划内容** - 根据项目需求调整目标、任务和里程碑
5. **完善元数据** - 更新 metadata 中的创建信息和标签

### 项目初始化

**推荐使用 init.sh 脚本：**

项目提供了 `init.sh` 交互式初始化脚本，可以自动完成以下任务：

1. **收集项目信息** - 项目名称、描述、作者等基础信息
2. **选择技术栈** - 开发语言、前端框架、后端框架、数据库、部署平台
3. **生成配置文件** - 自动更新 `.roo/rules/rules.md` 中的技术栈配置
4. **创建AI提示词** - 生成用于AI项目初始化的完整提示词

**使用方法：**

```bash
chmod +x init.sh
./init.sh
```

**脚本特点：**

- 🎯 交互式命令行界面
- 📝 支持默认值和自定义输入
- 🔄 可重新配置已有项目
- 🤖 自动生成AI友好的配置

### 与 PearAI 协作

- 使用自然语言描述需求， PearAI 会自动解析并更新计划
- 可以直接要求 PearAI 读取当前计划状态
- 支持批量修改多个目标或任务的状态

## 质量标准

- 所有目标必须具有可衡量的成功标准
- 任务描述应清晰明确，避免歧义
- 时间节点应合理可达成
- 优先级设置应符合项目实际需求
